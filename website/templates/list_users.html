{% extends "base.html" %}
{% block title %}Users list{% endblock %}
{% block content %}
{% with messages = get_flashed_messages() %} 
    {% if messages %}
    <div class="alert alert-primary" role="alert" id="messages">
        <button type="button" class="btn-close" 
                aria-label="Close" 
                onclick="document.getElementById('messages').style.display = 'none';"></button>
        {{ messages[0] }}
    </div>
    {% endif %} 
{% endwith %}
<div class="row">
    <div class="col">
        <h1 class="mt-5">Users list</h1>
    </div>
    <div class="col text-end">
        <a class="btn btn-primary mt-5" href="{{url_for('auth.sign_up')}}">Create user</a>
    </div>
</div>

<table class="table table-striped">
    <thead>
      <tr>
        <th scope="col">#</th>
        <th scope="col">Username</th>
        <th scope="col">Email</th>
        <th scope="col">Action</th>
      </tr>
    </thead>
    <tbody>
     {% for eachUser in user %} 
      <tr>
        <th scope="row">{{eachUser.id}}</th>
        <td class="lead">{{eachUser.username}}</td>
        <td class="lead">{{eachUser.email}}</td>
        <td>
            <form action="{{url_for('users.destroy', user_id=eachUser.id)}}" method="POST">

                <a href="{{url_for('users.show', user_id=eachUser.id)}}"
                    class="btn btn-outline-success"
                    role="button">
                        Show
                </a>
                <a href="{{url_for('users.update', user_id=eachUser.id)}}"
                    class="btn btn-outline-primary"
                    role="button">
                        Edit
                </a>
                <button type="submit" action="{{url_for('users.destroy', user_id=eachUser.id)}}" method="POST"class="btn btn-outline-danger">Delete</button>
            </form>
        </td>
    </tr>
    {% endfor %}
    </tbody>
  </table>

{% endblock %}